#+TITLE: Arch Linux System Notes

* Shrinking a LVM/LUKS partition
** Boot and setup
Boot into your live [[https://archlinux.org/download/][USB flash installation media]].

Decrypt the LUKS volume:
#+begin_src
cryptsetup luksOpen /dev/sda2 cryptdisk
#+end_src

** Resize the Volume
Extend the logical volume ~mediavol~ in ~MyVolGroup~ by 10GB and resize
its filesystem all at once
#+begin_src 
lvresize -L +10G --resizefs MyVolGroup/mediavol
#+end_src

Set the size of the logical volume ~mediavol~ in ~MyVolGroup~ to 15G and
resize its file system all at once:
#+begin_src 
lvresize -L 15G --resizefs MyVolGroup/mediavol
#+end_src

If you want to fill all the free space on a volume group, use the
following command:
#+begin_src 
lvresize -l +100%FREE --resizefs MyVolGroup/mediavol
#+end_src

You can run ~fsck~ just to make sure nothing broke:
#+begin_src 
e2fsck -f /dev/vgroup/lvhome
#+end_src



* Changing X org keybindings
** Globaly
Navigate to [[/sudo:root@Cortex:/etc/X11/xorg.conf.d][X org config dir]] and create the file [[/sudo:root@Cortex:/etc/X11/xorg.conf.d/90-custom-kdb.conf][90-custom-kdb.conf]]
then add the following lines:

The lines in this section should be appened to the file after the
~MatchIskeyboard~ line and befor the ~Endsection~ line.

#+begin_src conf-unix
Section "InputClass"
    Identifier "keyboard defaults"
    MatchIsKeyboard "on"
EndSection
#+end_src
 * Swap CapsLock and Control:
    #+begin_src conf-unix
    Option "XkbOptions" "ctrl:swapcaps"
    #+end_src
** Per User 
Swap Left Control and Tab This option is not avalible in [[/usr/share/X11/xkb/rules/base.lst][base.lst]] so
we have to instead create [[~/.Xmodmap][.Xmodmap]] in our $HOME~ directory and add the
appropriate values.

To find keys run the following:
#+begin_src sh
xmodmap -pke | egrep -e '(Tab|Backspace)'
#+end_src

the output is as follows:
#+begin_src conf-unix 
keycode  22 = BackSpace BackSpace BackSpace BackSpace
keycode  23 = Tab ISO_Left_Tab Tab ISO_Left_Tab
#+end_src

now we add the following to our [[~/.Xmodmap][.Xmodmap]] file:
#+begin_src conf-unix
keycode  23= BackSpace BackSpace BackSpace BackSpace
keycode  22 = Tab ISO_Left_Tab Tab ISO_Left_Tab
#+end_src


#+begin_src  sh
xmodmap ~/.Xmodmap
#+end_src
